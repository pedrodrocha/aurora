{
  "$schema": "../postgres-table.json",
  "name": "products",
  "columns": [
    {
      "name": "id",
      "type": "int",
      "native": "bigserial",
      "nullable": false,
      "primary": true
    },
    {
      "name": "category_id",
      "type": "int",
      "native": "integer",
      "nullable": false
    },
    {
      "name": "name",
      "type": "string",
      "native": "varchar(255)",
      "nullable": false
    },
    {
      "name": "description",
      "type": "string",
      "native": "text",
      "nullable": true
    },
    {
      "name": "price",
      "type": "decimal",
      "native": "numeric(10,2)",
      "nullable": false
    },
    {
      "name": "weight",
      "type": "float",
      "native": "real",
      "nullable": true
    },
    {
      "name": "metadata",
      "type": "json",
      "native": "jsonb",
      "nullable": true
    },
    {
      "name": "tags",
      "type": "extended",
      "native": "text[]",
      "nullable": true
    },
    {
      "name": "availability_period",
      "type": "extended",
      "native": "tsrange",
      "nullable": true
    },
    {
      "name": "location",
      "type": "geometric",
      "native": "point",
      "nullable": true
    },
    {
      "name": "sku",
      "type": "string",
      "native": "uuid",
      "nullable": false,
      "unique": true
    },
    {
      "name": "created_at",
      "type": "datetime",
      "native": "timestamp",
      "nullable": false
    },
    {
      "name": "updated_at",
      "type": "datetime",
      "native": "timestamptz",
      "nullable": false
    }
  ],
  "attributes": {
    "primaryKey": {
      "map": "products_pkey",
      "columns": ["id"]
    },
    "indexes": [
      {
        "map": "idx_products_category",
        "columns": ["category_id"],
        "type": "btree"
      },
      {
        "map": "idx_products_name_search",
        "columns": ["name"],
        "type": "gin"
      },
      {
        "map": "idx_products_metadata",
        "columns": ["metadata"],
        "type": "gin"
      },
      {
        "map": "idx_products_location",
        "columns": ["location"],
        "type": "gist"
      },
      {
        "map": "idx_products_price_range",
        "columns": ["price", "category_id"],
        "type": "btree"
      }
    ],
    "relations": [
      {
        "map": "fk_products_category",
        "columns": ["category_id"],
        "referencedTable": "categories",
        "referencedColumns": ["id"],
        "onUpdate": "CASCADE",
        "onDelete": "RESTRICT"
      }
    ]
  }
}